<!DOCTYPE html>
<html lang="fr">

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light px-4" style="background: linear-gradient(120deg, #e097aa, #78a8c8);
            border-bottom: 4px solid #ffc8dd;">

        <!-- BRAND -->
        <a class="navbar-brand d-flex align-items-center" href="#" style="gap:10px;">
            <img src="/static/img/logo/logo RemindMe.svg" width="60" height="60" alt="game logo">

            <span style="
            font-family: 'Bigdex', cursive;
            font-weight: bold;
            font-size: 1.5rem;
            color: azure;
            text-shadow: 1px 2px 4px rgba(0,0,0,0.4);
        ">
                RemindMe
            </span>
        </a>

        <!-- HAMBURGER BUTTON -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarProfileMenu"
            aria-controls="navbarProfileMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- COLLAPSIBLE AREA -->
        <div class="collapse navbar-collapse" id="navbarProfileMenu">

            <div class="ml-auto d-flex flex-column flex-lg-row align-items-lg-center" style="gap:10px;">

                <span style="font-family:'Quicksand', sans-serif; color:#fff; font-weight:600;">
                    Connecté : {{ username }}
                </span>

                <a class="btn px-3 py-2" href="{{ url_for('logout') }}" style="
                    background:#ffafcc;
                    color:#fff;
                    font-family:'Quicksand', sans-serif;
                    font-weight:700;
                    border-radius:12px;
                    box-shadow:0 3px 6px rgba(0,0,0,0.15);
                    transition:all .2s ease-in-out;
               " onmouseover="this.style.transform='scale(1.05)';
                             this.style.boxShadow='0 6px 12px rgba(0,0,0,0.2)'" onmouseout="this.style.transform='scale(1)';
                            this.style.boxShadow='0 3px 6px rgba(0,0,0,0.15)'">
                    Déconnexion
                </a>

            </div>

        </div>
    </nav>

    <!-- Main Content -->
    <main class="center" style="max-width:800px; margin:40px auto; text-align:center;">

        <h2 style="
        font-family: 'Patrick Hand', cursive;
        color:#fff;
        font-weight:600;
        text-shadow:1px 2px 4px rgba(0,0,0,0.3);
        margin-bottom:30px;
    ">Choisissez la difficulté</h2>

        <div class="btn-row" style="display:flex; justify-content:center; gap:15px; margin-bottom:40px;">
            <a class="btn" href="{{ url_for('game') }}?difficulty=easy" style="
            background:#bde0fe; color:#fff; font-family:'Quicksand', sans-serif; font-weight:700;
            padding:10px 20px; border-radius:12px; box-shadow:0 3px 6px rgba(0,0,0,0.15);
            transition: all 0.2s ease-in-out;
        " onmouseover="this.style.transform='scale(1.05)';" onmouseout="this.style.transform='scale(1)';">Facile</a>

            <a class="btn" href="{{ url_for('game') }}?difficulty=medium" style="
            background:#ffc8dd; color:#fff; font-family:'Quicksand', sans-serif; font-weight:700;
            padding:10px 20px; border-radius:12px; box-shadow:0 3px 6px rgba(0,0,0,0.15);
            transition: all 0.2s ease-in-out;
        " onmouseover="this.style.transform='scale(1.05)';" onmouseout="this.style.transform='scale(1)';">Moyen</a>

            <a class="btn" href="{{ url_for('game') }}?difficulty=hard" style="
            background:#ffafcc; color:#fff; font-family:'Quicksand', sans-serif; font-weight:700;
            padding:10px 20px; border-radius:12px; box-shadow:0 3px 6px rgba(0,0,0,0.15);
            transition: all 0.2s ease-in-out;
        " onmouseover="this.style.transform='scale(1.05)';" onmouseout="this.style.transform='scale(1)';">Difficile</a>
        </div>

        <!-- Leaderboards -->
        <section class="leaderboards" style="display:flex; justify-content:center; gap:20px; flex-wrap:wrap;">
            <!-- Easy -->
            <div class="lb" style="
          background: linear-gradient(145deg, #ffe0f0, #bde0fe);
          border-radius:15px;
          box-shadow:0 4px 12px rgba(0,0,0,0.15);
          padding:15px;
          min-width:220px;
    ">
                <h3 style="font-family: 'Patrick Hand', cursive; color:#fff; text-shadow:1px 2px 3px rgba(0,0,0,0.3);">
                    Facile</h3>
                <table id="lb-easy"
                    style="width:100%; border-collapse: collapse; font-family:'Quicksand', sans-serif; color:#333; background:#fff; border-radius:8px; overflow:hidden;">
                    <tbody></tbody>
                </table>
            </div>

            <!-- Medium -->
            <div class="lb" style="
          background: linear-gradient(145deg, #ffc8dd, #bde0fe);
          border-radius:15px;
          box-shadow:0 4px 12px rgba(0,0,0,0.15);
          padding:15px;
          min-width:220px;
    ">
                <h3 style="font-family: 'Patrick Hand', cursive; color:#fff; text-shadow:1px 2px 3px rgba(0,0,0,0.3);">
                    Moyen</h3>
                <table id="lb-medium"
                    style="width:100%; border-collapse: collapse; font-family:'Quicksand', sans-serif; color:#333; background:#fff; border-radius:8px; overflow:hidden;">
                    <tbody></tbody>
                </table>
            </div>

            <!-- Hard -->
            <div class="lb" style="
          background: linear-gradient(145deg, #ffafcc, #ffc8dd);
          border-radius:15px;
          box-shadow:0 4px 12px rgba(0,0,0,0.15);
          padding:15px;
          min-width:220px;
    ">
                <h3 style="font-family: 'Patrick Hand', cursive; color:#fff; text-shadow:1px 2px 3px rgba(0,0,0,0.3);">
                    Difficile</h3>
                <table id="lb-hard"
                    style="width:100%; border-collapse: collapse; font-family:'Quicksand', sans-serif; color:#333; background:#fff; border-radius:8px; overflow:hidden;">
                    <tbody></tbody>
                </table>
            </div>
        </section>

    </main>

    <script>
        function fetchLB(diff, elId) {
            fetch("/leaderboard_data/" + diff)
                .then((r) => r.json())
                .then((data) => {
                    const tb = document.querySelector("#" + elId + " tbody");
                    tb.innerHTML = "<tr><th>Joueur</th><th>Temps</th><th>Coups</th></tr>";
                    data.forEach(
                        (row) =>
                        tb.innerHTML +=
                        `<tr><td>${row.username}</td><td>${row.best_time}</td><td>${row.best_moves}</td></tr>`
                    );
                });
        }
        fetchLB("easy", "lb-easy");
        fetchLB("medium", "lb-medium");
        fetchLB("hard", "lb-hard");
    </script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous">
    </script>
</body>

</html>