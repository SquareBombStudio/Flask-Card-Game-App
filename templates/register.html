<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Inscription</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>

<body>
    <div class="auth-box" style="
        max-width: 350px;
        margin: 50px auto;
        padding: 30px;
        background: linear-gradient(145deg, #bde0fe, #ffc8dd);
        border-radius: 20px;
        box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        text-align: center;
     ">

        <h2 style="
          color: #fff;
          font-weight: 700;
          margin-bottom: 20px;
          text-shadow: 1px 2px 4px rgba(0,0,0,0.3);
        ">Créer un compte</h2>

        {% if error %}
        <p class="error" style="
          color: #ff4d6d;
          font-weight: 600;
          margin-bottom: 15px;
        ">{{ error }}</p>
        {% endif %}

        <form method="POST" id="registerForm" style="display: flex; flex-direction: column; gap: 15px;">
            <input name="username" placeholder="Nom d'utilisateur" required style="
                 width: 100%;
                 box-sizing: border-box;
                 padding: 10px 15px;
                 border-radius: 12px;
                 border: 2px solid #ffc8dd;
                 font-size: 1rem;
               " />

            <input id="password" name="password" type="password" placeholder="Mot de passe" required style="
                 width: 100%;
                 box-sizing: border-box;
                 padding: 10px 15px;
                 border-radius: 12px;
                 border: 2px solid #bde0fe;
                 font-size: 1rem;
               " />

            <div id="pwHints" style="font-size: 0.85rem; color: #fff; text-align: left;"></div>

            <button type="submit" style="
                  width: 100%;
                  background: #ffafcc;
                  color: #fff;
                  font-weight: 700;
                  padding: 10px;
                  border-radius: 12px;
                  border: none;
                  cursor: pointer;
                  box-shadow: 0 3px 6px rgba(0,0,0,0.15);
                  transition: all 0.2s ease-in-out;
                " onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 6px 12px rgba(0,0,0,0.2)';"
                onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 3px 6px rgba(0,0,0,0.15)';">
                Créer
            </button>
        </form>

        <p style="margin-top: 15px; font-size: 0.9rem; color: #fff;">
            Déjà un compte ?
            <a href="{{ url_for('login') }}" style="color:#1179b9; font-weight:600; text-decoration:none;">Connexion</a>
        </p>
    </div>

    <script>
        const pw = document.getElementById("password");
        const hints = document.getElementById("pwHints");
        pw.addEventListener("input", () => {
            const v = pw.value;
            const checks = [{
                    ok: v.length >= 8,
                    txt: "≥ 8 caractères"
                },
                {
                    ok: /[A-Z]/.test(v),
                    txt: "1 majuscule"
                },
                {
                    ok: /\d/.test(v),
                    txt: "1 chiffre"
                },
                {
                    ok: /[^A-Za-z0-9]/.test(v),
                    txt: "1 caractère spécial"
                },
            ];
            hints.innerHTML = checks
                .map(
                    (c) =>
                    `<div style="color:${c.ok ? "green" : "#c0392b"}">${
                c.ok ? "✔" : "✖"
              } ${c.txt}</div>`
                )
                .join("");
        });
    </script>
</body>

</html>